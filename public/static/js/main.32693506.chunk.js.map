{"version":3,"sources":["components/Header.js","utils/Api.js","components/PopupWithForm.js","context/CurrentUserContext.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/DeletePlacePopup.js","components/Card.js","components/Spinner/Spinner.js","components/Main.js","components/Footer.js","components/ImagePopup.js","components/App.js","index.js","images/logo.svg"],"names":["Header","className","alt","src","logo","api","url","headers","this","fetch","then","_handleResponse","response","ok","json","Promise","reject","status","name","about","method","body","JSON","stringify","link","avatar","cardId","isLiked","authorization","PopupWithForm","isOpen","title","children","rest","buttonClassName","disabled","noValidate","onSubmit","onClick","onClose","type","buttonText","CurrentUserContext","React","createContext","validators","required","value","minLength","length","maxLength","containNumbers","test","description","EditProfilePopup","props","currentUser","useContext","useState","setName","setDescription","errors","setErrors","useEffect","handleChangeName","useCallback","e","target","handleChangeDescription","handleSubmit","preventDefault","onUpdateUser","nameValidationResult","Object","keys","map","errorKey","errorResult","reduce","acc","el","descriptionValidationResult","isNameValid","values","some","Boolean","isDescriptionValid","isSubmitDisabled","isLoading","placeholder","onChange","EditAvatarPopup","linkRef","useRef","onUpdateAvatar","current","id","ref","AddPlacePopup","place","setPlace","setLink","handleChangePlace","handleChangeLink","onAddPlace","DeletePlacePopup","onDeleteCard","deletingCard","Card","isOwn","ownerId","_id","cardDeleteButtonClassName","like","i","cardLikeButtonClassName","cardLikesNumberClassName","likes","onCardClick","onCardLike","onCardDelete","Spinner","Main","cards","onEditAvatar","onEditProfile","isStartLoading","card","Footer","ImagePopup","App","setCurrentUser","setCards","setIsLoading","setStartIsLoading","setDeletingCard","handleEscClose","keyCode","closeAllPopups","document","addEventListener","removeEventListener","handleMouseClose","closest","all","getUserInfo","getInitialCards","profile","items","item","key","owner","catch","err","console","log","finally","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isPlacePopupOpen","setIsPlacePopupOpen","isDeletePlacePopupOpen","setIsDeletePlacePopupOpen","selectedCard","setSelectedCard","Provider","changeLikeCardStatus","newCard","newCardFormat","newCards","handleUpdateCard","c","newProfile","setUserInfo","avatarLink","setAvatar","newPlace","insertCard","withoutDeleted","filter","—Å","deleteCard","ReactDOM","render","StrictMode","getElementById","module","exports"],"mappings":"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","file":"static/js/main.32693506.chunk.js","sourcesContent":["import React from \"react\";\nimport logo from \"../images/logo.svg\";\n\nexport const Header = () => {\n  return (\n    <header className=\"header\">\n      <img className=\"header__logo\" alt=\"–õ–æ–≥–æ—Ç–∏–ø Mesto.Russia\" src={logo} />\n      <div className=\"header__line\"></div>\n    </header>\n  );\n};\n","class Api {\n  constructor({ url, headers = {} }) {\n    this.url = url;\n    this.headers = headers;\n  }\n\n  getInitialCards() {\n    return fetch(`${this.url}/cards`, {\n      headers: this.headers,\n    }).then(this._handleResponse);\n  }\n\n  _handleResponse(response) {\n    if (response.ok) {\n      return response.json();\n    }\n    return Promise.reject(`–û—à–∏–±–∫–∞: ${response.status}`);\n  }\n\n  getUserInfo() {\n    return fetch(`${this.url}/users/me`, {\n      headers: this.headers,\n    }).then(this._handleResponse);\n  }\n\n  setUserInfo(name, about) {\n    return fetch(`${this.url}/users/me`, {\n      method: \"PATCH\",\n      headers: this.headers,\n      body: JSON.stringify({\n        name: name,\n        about: about,\n      }),\n    }).then(this._handleResponse);\n  }\n\n  setAvatar(link) {\n    return fetch(`${this.url}/users/me/avatar`, {\n      method: \"PATCH\",\n      headers: this.headers,\n      body: JSON.stringify({\n        avatar: link,\n      }),\n    }).then(this._handleResponse);\n  }\n\n  insertCard(name, link) {\n    return fetch(`${this.url}/cards`, {\n      method: \"POST\",\n      headers: this.headers,\n      body: JSON.stringify({\n        name: name,\n        link: link,\n      }),\n    }).then(this._handleResponse);\n  }\n\n  changeLikeCardStatus(cardId, isLiked) {\n    return fetch(`${this.url}/cards/likes/${cardId}`, {\n      method: isLiked ? \"DELETE\" : \"PUT\",\n      headers: this.headers,\n    }).then(this._handleResponse);\n  }\n\n  deleteCard(cardId) {\n    return fetch(`${this.url}/cards/${cardId}`, {\n      method: \"DELETE\",\n      headers: this.headers,\n    }).then(this._handleResponse);\n  }\n}\n\nconst api = new Api({\n  url: \"https://mesto.nomoreparties.co/v1/cohort-14\",\n  headers: {\n    authorization: \"42ce0924-10a6-4b78-98b5-287f3f244b55\",\n    \"Content-Type\": \"application/json\",\n  },\n});\n\nexport default api;\n","import React from \"react\";\n\nexport const PopupWithForm = ({ isOpen, name, title, children, ...rest }) => {\n  const buttonClassName = `popup__btn-save ${\n    rest.disabled ? \"popup__btn-save_disabled\" : \"\"\n  }`;\n\n  return (\n    <div\n      className={\n        isOpen\n          ? `popup popup_type_${name} popup_opened`\n          : `popup popup_type_${name}`\n      }\n    >\n      <form\n        className=\"popup__container popup__form_card\"\n        name={name}\n        noValidate\n        onSubmit={rest.onSubmit}\n      >\n        <button\n          onClick={rest.onClose}\n          type=\"button\"\n          className=\"popup__btn-close\"\n        ></button>\n        <div className=\"popup__title\">{title}</div>\n        <>{children}</>\n        <button disabled={rest.disabled} className={buttonClassName}>\n          {rest.buttonText}\n        </button>\n      </form>\n    </div>\n  );\n};\n","import React from \"react\";\n\nexport const CurrentUserContext = React.createContext();\n","import React, { useCallback, useEffect, useState } from \"react\";\nimport { PopupWithForm } from \"./PopupWithForm\";\nimport { CurrentUserContext } from \"../context/CurrentUserContext\";\n\nconst validators = {\n  name: {\n    required: (value) => {\n      return value === \"\";\n    },\n    minLength: (value) => {\n      return value && value.length < 2;\n    },\n    maxLength: (value) => {\n      return value && value.length > 20;\n    },\n    containNumbers: (value) => {\n      return !/^[–∞-—è–ê-–Ø—ë–Åa-zA-Z\\s]+$/.test(value);\n    },\n  },\n  description: {\n    required: (value) => {\n      return value === \"\";\n    },\n    minLength: (value) => {\n      return value && value.length < 2;\n    },\n    maxLength: (value) => {\n      return value && value.length > 200;\n    },\n  },\n};\n\nexport const EditProfilePopup = (props) => {\n  const currentUser = React.useContext(CurrentUserContext);\n  const [name, setName] = React.useState(\"\");\n  const [description, setDescription] = React.useState(\"\");\n  const [errors, setErrors] = useState({\n    name: {\n      required: true,\n      minLength: true,\n      maxLength: true,\n      containNumbers: true,\n    },\n    description: {\n      required: true,\n      minLength: true,\n      maxLength: true,\n    },\n  });\n\n  React.useEffect(() => {\n    if (props.isOpen) {\n      setName(currentUser.name);\n      setDescription(currentUser.about);\n    }\n  }, [currentUser, props.isOpen]);\n\n  const handleChangeName = useCallback((e) => {\n    setName(e.target.value);\n  }, []);\n\n  const handleChangeDescription = useCallback((e) => {\n    setDescription(e.target.value);\n  }, []);\n\n  const handleSubmit = useCallback(\n    (e) => {\n      e.preventDefault();\n      props.onUpdateUser({\n        name,\n        about: description,\n      });\n    },\n    [name, description, props]\n  );\n\n  useEffect(\n    function validateInputs() {\n      const nameValidationResult = Object.keys(validators.name)\n        .map((errorKey) => {\n          const errorResult = validators.name[errorKey](name);\n          return { [errorKey]: errorResult };\n        })\n        .reduce((acc, el) => ({ ...acc, ...el }), {});\n      const descriptionValidationResult = Object.keys(validators.description)\n        .map((errorKey) => {\n          const errorResult = validators.description[errorKey](description);\n          return { [errorKey]: errorResult };\n        })\n        .reduce((acc, el) => ({ ...acc, ...el }), {});\n\n      setErrors({\n        name: nameValidationResult,\n        description: descriptionValidationResult,\n      });\n    },\n    [name, description, setErrors]\n  );\n\n  const isNameValid = Object.values(errors.name).some(Boolean);\n  const isDescriptionValid = Object.values(errors.description).some(Boolean);\n  const isSubmitDisabled = isNameValid || isDescriptionValid;\n\n  return (\n    <PopupWithForm\n      name={\"editProfileForm\"}\n      title={\"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å\"}\n      isLoading={props.isLoading}\n      buttonText={props.isLoading ? \"–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ ...\" : \"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å\"}\n      isOpen={props.isOpen}\n      onClose={props.onClose}\n      onSubmit={handleSubmit}\n      disabled={isSubmitDisabled}\n    >\n      {\n        <>\n          <div className=\"popup__field popup__field_info_name\">\n            <input\n              placeholder=\"–ò–º—è\"\n              className=\"popup__text\"\n              type=\"text\"\n              name={name}\n              value={name}\n              onChange={handleChangeName}\n            />\n            {errors.name.required && (\n              <span className=\"popup__input popup__input-error\">\n                {\"–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å\"}\n              </span>\n            )}\n            {errors.name.minLength && (\n              <span className=\"popup__input popup__input-error\">\n                {\"–î–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 2 —Å–∏–º–≤–æ–ª–∞\"}\n              </span>\n            )}\n            {errors.name.maxLength && (\n              <span className=\"popup__input popup__input-error\">\n                {\"–î–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∞–∫—Å–∏–º—É–º 20 —Å–∏–º–≤–æ–ª–æ–≤\"}\n              </span>\n            )}\n            {errors.name.containNumbers && (\n              <span className=\"popup__input popup__input-error\">\n                {\"–î–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ –±—É–∫–≤—ã\"}\n              </span>\n            )}\n          </div>\n          <div className=\"popup__field popup__field_info_other\">\n            <input\n              placeholder=\"–†–æ–¥ –∑–∞–Ω—è—Ç–∏–π\"\n              className=\"popup__text\"\n              type=\"text\"\n              name={description}\n              value={description}\n              onChange={handleChangeDescription}\n            />\n            {errors.description.required && (\n              <span className=\"popup__input popup__input-error\">\n                {\"–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å\"}\n              </span>\n            )}\n            {errors.description.minLength && (\n              <span className=\"popup__input popup__input-error\">\n                {\"–î–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 2 —Å–∏–º–≤–æ–ª–∞\"}\n              </span>\n            )}\n            {errors.description.maxLength && (\n              <span className=\"popup__input popup__input-error\">\n                {\"–î–æ–ª–∂–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∞–∫—Å–∏–º—É–º 200 —Å–∏–º–≤–æ–ª–æ–≤\"}\n              </span>\n            )}\n          </div>\n        </>\n      }\n    </PopupWithForm>\n  );\n};\n\nexport default EditProfilePopup;\n","import React, { useCallback } from \"react\";\nimport { PopupWithForm } from \"./PopupWithForm\";\n\nexport const EditAvatarPopup = (props) => {\n  const linkRef = React.useRef(\"\");\n\n  const handleSubmit = useCallback(\n    (e) => {\n      e.preventDefault();\n      props.onUpdateAvatar({\n        avatar: linkRef.current.value,\n      });\n    },\n    [props]\n  );\n\n  React.useEffect(() => {\n    linkRef.current.value = \"\";\n  }, [props.isOpen]);\n\n  return (\n    <PopupWithForm\n      isOpen={props.isOpen}\n      onClose={props.onClose}\n      onSubmit={handleSubmit}\n      name={\"editAvatarForm\"}\n      title={\"–û–±–Ω–æ–≤–∏—Ç—å –∞–≤–∞—Ç–∞—Ä\"}\n      isLoading={props.isLoading}\n      buttonText={props.isLoading ? \"–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ ...\" : \"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å\"}\n    >\n      {\n        <div className=\"popup__field popup__field_info_other\">\n          <input\n            type=\"url\"\n            placeholder=\"–°—Å—ã–ª–∫–∞ –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫—É\"\n            className=\"popup__text\"\n            name=\"link\"\n            id=\"link\"\n            required\n            ref={linkRef}\n          />\n          <span id=\"link-error\" className=\"popup__input\"></span>\n        </div>\n      }\n    </PopupWithForm>\n  );\n};\n\nexport default EditAvatarPopup;\n","import React, { useCallback } from \"react\";\nimport { PopupWithForm } from \"./PopupWithForm\";\n\nexport const AddPlacePopup = (props) => {\n  const [place, setPlace] = React.useState(\"\");\n  const [link, setLink] = React.useState(\"\");\n\n  const handleChangePlace = useCallback((e) => {\n    setPlace(e.target.value);\n  }, []);\n\n  const handleChangeLink = useCallback((e) => {\n    setLink(e.target.value);\n  }, []);\n\n  const handleSubmit = useCallback(\n    (e) => {\n      e.preventDefault();\n      props.onAddPlace({\n        place,\n        link,\n      });\n    },\n    [place, link, props]\n  );\n\n  React.useEffect(() => {\n    setPlace(\"\");\n    setLink(\"\");\n  }, [props.isOpen]);\n\n  return (\n    <PopupWithForm\n      isOpen={props.isOpen}\n      onClose={props.onClose}\n      onSubmit={handleSubmit}\n      name={\"addCardForm\"}\n      title={\"–ù–æ–≤–æ–µ –º–µ—Å—Ç–æ\"}\n      isLoading={props.isLoading}\n      buttonText={props.isLoading ? \"–î–æ–±–∞–≤–ª–µ–Ω–∏–µ...\" : \"–î–æ–±–∞–≤–∏—Ç—å\"}\n    >\n      {\n        <>\n          <div className=\"popup__field popup__field_info_name\">\n            <input\n              type=\"text\"\n              placeholder=\"–ù–∞–∑–≤–∞–Ω–∏–µ\"\n              className=\"popup__text\"\n              minLength=\"1\"\n              maxLength=\"30\"\n              required\n              name={place}\n              value={place}\n              onChange={handleChangePlace}\n              //onChange={handleInputChange}\n            />\n            <span id=\"place-error\" className=\"popup__input\"></span>\n          </div>\n          <div className=\"popup__field popup__field_info_other\">\n            <input\n              type=\"url\"\n              placeholder=\"–°—Å—ã–ª–∫–∞ –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫—É\"\n              className=\"popup__text\"\n              required\n              name={link}\n              value={link}\n              onChange={handleChangeLink}\n              //onChange={handleInputChange}\n            />\n            <span id=\"link-error\" className=\"popup__input\"></span>\n          </div>\n        </>\n      }\n    </PopupWithForm>\n  );\n};\n","import React, { useCallback } from \"react\";\nimport { PopupWithForm } from \"./PopupWithForm\";\n\nexport const DeletePlacePopup = (props) => {\n  const handleSubmit = useCallback(\n    (e) => {\n      e.preventDefault();\n      props.onDeleteCard(props.deletingCard);\n    },\n    [props]\n  );\n\n  return (\n    <PopupWithForm\n      isOpen={props.isOpen}\n      onClose={props.onClose}\n      name={\"deleteCardForm\"}\n      title={\"–í—ã —É–≤–µ—Ä–µ–Ω—ã?\"}\n      onSubmit={handleSubmit}\n      isLoading={props.isLoading}\n      buttonText={props.isLoading ? \"–£–¥–∞–ª–µ–Ω–∏–µ ...\" : \"–î–∞\"}\n    />\n  );\n};\n","import React from \"react\";\nimport { CurrentUserContext } from \"../context/CurrentUserContext\";\n\nfunction Card(props) {\n  const handleClick = () => props.onCardClick(props);\n  const handleLikeClick = () => props.onCardLike(props);\n  const handleDeleteClick = () => props.onCardDelete(props);\n  const currentUser = React.useContext(CurrentUserContext);\n\n  // –û–ø—Ä–µ–¥–µ–ª—è–µ–º, —è–≤–ª—è–µ–º—Å—è –ª–∏ –º—ã –≤–ª–∞–¥–µ–ª—å—Ü–µ–º —Ç–µ–∫—É—â–µ–π –∫–∞—Ä—Ç–æ—á–∫–∏\n  const isOwn = props.ownerId === currentUser._id;\n\n  // –°–æ–∑–¥–∞—ë–º –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é, –∫–æ—Ç–æ—Ä—É—é –ø–æ—Å–ª–µ –∑–∞–¥–∞–¥–∏–º –≤ `className` –¥–ª—è –∫–Ω–æ–ø–∫–∏ —É–¥–∞–ª–µ–Ω–∏—è\n  const cardDeleteButtonClassName = `photo-grid__delete ${\n    isOwn ? \"photo-grid__delete_visible\" : \"photo-grid__delete_hidden\"\n  }`;\n\n  // –û–ø—Ä–µ–¥–µ–ª—è–µ–º, –µ—Å—Ç—å –ª–∏ —É –∫–∞—Ä—Ç–æ—á–∫–∏ –ª–∞–π–∫, –ø–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–π —Ç–µ–∫—É—â–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º\n  const isLiked = props.like.some((i) => i._id === currentUser._id);\n\n  const cardLikeButtonClassName = `photo-grid__like ${\n    isLiked ? \"photo-grid__like_active\" : null\n  }`;\n\n  const cardLikesNumberClassName = `photo-grid__like-number ${\n    props.likes > 0\n      ? \"photo-grid__like-number_visible\"\n      : \"photo-grid__like-number_hidden\"\n  }`;\n\n  return (\n    <figure className=\"photo-grid__item\">\n      <img\n        onClick={handleClick}\n        src={props.src}\n        alt=\"–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏\"\n        className=\"photo-grid__image\"\n      />\n      <h3 className=\"photo-grid__title\">{props.name}</h3>\n      <div className=\"photo-grid__likes\">\n        <button\n          type=\"button\"\n          className={cardLikeButtonClassName}\n          onClick={handleLikeClick}\n        ></button>\n        <div className={cardLikesNumberClassName}>{props.likes}</div>\n      </div>\n      <button\n        type=\"button\"\n        className={cardDeleteButtonClassName}\n        onClick={handleDeleteClick}\n      ></button>\n    </figure>\n  );\n}\n\nexport default Card;\n","import React from \"react\";\nimport \"./Spinner.css\";\n\nconst Spinner = () => {\n  return <div className=\"spinner\" />;\n};\n\nexport default Spinner;\n","import React from \"react\";\nimport Card from \"./Card\";\nimport { CurrentUserContext } from \"../context/CurrentUserContext\";\nimport Spinner from \"./Spinner/Spinner\";\n\nexport const Main = ({ cards, ...rest }) => {\n  const currentUser = React.useContext(CurrentUserContext);\n\n  return (\n    <main id=\"abc\" className=\"content\">\n      <section className=\"profile\">\n        <div className=\"profile__info\">\n          <button onClick={rest.onEditAvatar} className=\"profile__avatar\">\n            <div className=\"profile__overlay\">\n              <div className=\"profile__avatar-edit\"></div>\n            </div>\n            <img\n              alt=\"owner face\"\n              className=\"profile__photo\"\n              src={currentUser.avatar}\n            />\n          </button>\n          <div className=\"profile__author\">\n            <div className=\"profile__edit-line\">\n              <h1 className=\"profile__title\">{currentUser.name}</h1>\n              <button\n                onClick={rest.onEditProfile}\n                type=\"button\"\n                className=\"profile__btn-edit\"\n              ></button>\n            </div>\n            <h2 className=\"profile__subtitle\">{currentUser.about}</h2>\n          </div>\n        </div>\n        <button\n          onClick={rest.onAddPlace}\n          type=\"button\"\n          className=\"profile__btn-add\"\n        ></button>\n      </section>\n      <section className=\"photo-grid\">\n        {rest.isStartLoading && cards ? (\n          <Spinner />\n        ) : (\n          cards.map((card) => (\n            <Card\n              {...card}\n              onCardClick={rest.onCardClick}\n              onCardDelete={rest.onCardDelete}\n              onCardLike={rest.onCardLike}\n            />\n          ))\n        )}\n      </section>\n    </main>\n  );\n};\n","import React from \"react\";\n\nexport const Footer = () => {\n  return (\n    <footer className=\"footer\">\n      <p className=\"footer__copyright\">&copy; 2020 Mesto Russia</p>\n    </footer>\n  );\n};\n","import React from \"react\";\n\nexport const ImagePopup = (card) => {\n  return (\n    <div\n      className={\n        card.isOpen\n          ? `popup popup_type_${card.name} popup_opened`\n          : `popup popup_type_${card.name}`\n      }\n    >\n      <form className=\"popup__picture-container\">\n        <img alt=\"tremendous screen\" src={card.src} className=\"popup__image\" />\n        <button\n          onClick={card.onClose}\n          type=\"button\"\n          className=\"popup__btn-close\"\n          id=\"cardPictureForm\"\n        ></button>\n        <h3 className=\"popup__bottom-title\" id=\"pictureTitle\">\n          {card.name}\n        </h3>\n      </form>\n    </div>\n  );\n};\n","import React, { useEffect, useState } from \"react\";\nimport { Header } from \"./Header\";\nimport api from \"../utils/Api\";\nimport { EditProfilePopup } from \"./EditProfilePopup\";\nimport { EditAvatarPopup } from \"./EditAvatarPopup\";\nimport { AddPlacePopup } from \"./AddPlacePopup\";\nimport { DeletePlacePopup } from \"./DeletePlacePopup\";\nimport { Main } from \"./Main\";\nimport { Footer } from \"./Footer\";\nimport { ImagePopup } from \"./ImagePopup\";\nimport { CurrentUserContext } from \"../context/CurrentUserContext\";\n\nfunction App() {\n  const [currentUser, setCurrentUser] = useState({});\n  const [cards, setCards] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [isStartLoading, setStartIsLoading] = useState(false);\n  const [deletingCard, setDeletingCard] = useState(\"\");\n\n  useEffect(() => {\n    const handleEscClose = (e) => {\n      if (e.keyCode === 27) {\n        closeAllPopups();\n      }\n    };\n    document.addEventListener(\"keydown\", handleEscClose);\n    return () => {\n      document.removeEventListener(\"keydown\", handleEscClose);\n    };\n  }, []);\n\n  useEffect(() => {\n    const handleMouseClose = (e) => {\n      if (e.target === e.target.closest(\".popup\")) {\n        closeAllPopups();\n      }\n    };\n    document.addEventListener(\"click\", handleMouseClose);\n    return () => {\n      document.removeEventListener(\"click\", handleMouseClose);\n    };\n  }, []);\n\n  useEffect(() => {\n    setStartIsLoading(true);\n    Promise.all([api.getUserInfo(), api.getInitialCards()])\n      .then((response) => {\n        const [profile, cards] = response;\n        //fill profile elemements\n        setCurrentUser(profile);\n        //fill cards elemements\n        const items = cards.map((item) => ({\n          key: item._id,\n          cardId: item._id,\n          ownerId: item.owner._id,\n          likes: item.likes.length,\n          like: item.likes,\n          name: item.name,\n          src: item.link,\n        }));\n        setCards(items);\n      })\n      .catch((err) =>\n        console.log(`–ó–∞–≥—Ä—É–∑–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –∏ –∫–∞—Ä—Ç–æ—á–∫–∏: ${err}`)\n      )\n      .finally(() => {\n        setStartIsLoading(false);\n      });\n  }, []);\n\n  function handleCardLike(card) {\n    // –°–Ω–æ–≤–∞ –ø—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —É–∂–µ –ª–∞–π–∫ –Ω–∞ —ç—Ç–æ–π –∫–∞—Ä—Ç–æ—á–∫–µ\n    const cardId = card.cardId;\n    const isLiked = card.like.some((i) => i._id === currentUser._id);\n\n    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –≤ API –∏ –ø–æ–ª—É—á–∞–µ–º –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏\n    api\n      .changeLikeCardStatus(cardId, isLiked)\n      .then((newCard) => {\n        const newCardFormat = {\n          key: newCard._id,\n          cardId: newCard._id,\n          ownerId: newCard.owner._id,\n          likes: newCard.likes.length,\n          like: newCard.likes,\n          name: newCard.name,\n          src: newCard.link,\n        };\n        // –§–æ—Ä–º–∏—Ä—É–µ–º –Ω–æ–≤—ã–π –º–∞—Å—Å–∏–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–º–µ—é—â–µ–≥–æ—Å—è, –ø–æ–¥—Å—Ç–∞–≤–ª—è—è –≤ –Ω–µ–≥–æ –Ω–æ–≤—É—é –∫–∞—Ä—Ç–æ—á–∫—É\n        const newCards = cards.map((c) =>\n          c.cardId === cardId ? newCardFormat : c\n        );\n        // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–µ–π—Ç\n        handleUpdateCard({ newCards });\n      })\n      .catch((err) => console.log(`–ò–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –ª–∞–π–∫–∞: ${err}`));\n  }\n\n  function handleCardDelete(card) {\n    setIsLoading(true);\n    const withoutDeleted = cards.filter((—Å) => card !== —Å.cardId);\n    api\n      .deleteCard(card)\n      .then(() => {\n        setCards(withoutDeleted);\n        closeAllPopups();\n      })\n      .catch((err) => console.log(`–£–¥–∞–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏: ${err}`))\n      .finally(() => {\n        setIsLoading(false);\n      });\n  }\n\n  function handleUpdateCard(newCards) {\n    const updatedCards = newCards.newCards;\n    const items = updatedCards.map((item) => ({\n      key: item.key,\n      cardId: item.cardId,\n      ownerId: item.ownerId,\n      likes: item.likes,\n      like: item.like,\n      name: item.name,\n      src: item.src,\n    }));\n    setCards(items);\n  }\n\n  function handleUpdateUser(newProfile) {\n    setIsLoading(true);\n    api\n      .setUserInfo(newProfile.name, newProfile.about)\n      .then((response) => {\n        setCurrentUser(response);\n        closeAllPopups();\n      })\n      .catch((err) =>\n        console.log(`–ò–∑–º–µ–Ω–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ: ${err}`)\n      )\n      .finally(() => {\n        setIsLoading(false);\n      });\n  }\n\n  function handleUpdateAvatar(avatarLink) {\n    setIsLoading(true);\n    api\n      .setAvatar(avatarLink.avatar)\n      .then((response) => {\n        setCurrentUser(response);\n        closeAllPopups();\n      })\n      .catch((err) => console.log(`–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–≤–∞—Ç–∞—Ä–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: ${err}`))\n      .finally(() => {\n        setIsLoading(false);\n      });\n  }\n\n  function handleAddPlaceSubmit(newPlace) {\n    setIsLoading(true);\n    api\n      .insertCard(newPlace.place, newPlace.link)\n      .then((newCard) => {\n        const newCardFormat = {\n          key: newCard._id,\n          cardId: newCard._id,\n          ownerId: newCard.owner._id,\n          likes: newCard.likes.length,\n          like: newCard.likes,\n          name: newCard.name,\n          src: newCard.link,\n        };\n        setCards([newCardFormat, ...cards]);\n        closeAllPopups();\n      })\n      .catch((err) => console.log(`–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏: ${err}`))\n      .finally(() => {\n        setIsLoading(false);\n      });\n  }\n\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\n  const [isPlacePopupOpen, setIsPlacePopupOpen] = useState(false);\n  const [isDeletePlacePopupOpen, setIsDeletePlacePopupOpen] = useState(false);\n  const [selectedCard, setSelectedCard] = useState({});\n\n  const closeAllPopups = () => {\n    setIsEditProfilePopupOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsPlacePopupOpen(false);\n    setIsDeletePlacePopupOpen(false);\n    setSelectedCard({});\n  };\n\n  const handleCardClick = (props) => {\n    setIsPlacePopupOpen(true);\n    setSelectedCard(props);\n  };\n\n  const handleEditProfileClick = () => {\n    setIsEditProfilePopupOpen(true);\n  };\n\n  const handleEditAvatarClick = () => {\n    setIsEditAvatarPopupOpen(true);\n  };\n  const handleAddPlaceClick = () => {\n    setIsAddPlacePopupOpen(true);\n  };\n\n  const handleDeletePlaceClick = (props) => {\n    setDeletingCard(props.cardId);\n    setIsDeletePlacePopupOpen(true);\n  };\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"page\">\n        <Header />\n        {/* handlers of the page buttons */}\n        <Main\n          cards={cards}\n          onEditAvatar={handleEditAvatarClick}\n          onEditProfile={handleEditProfileClick}\n          onAddPlace={handleAddPlaceClick}\n          onCardClick={handleCardClick}\n          onCardDelete={handleDeletePlaceClick}\n          onCardLike={handleCardLike}\n          isStartLoading={isStartLoading}\n        />\n\n        {/* PopUp for PROFILE Editing */}\n        <EditProfilePopup\n          isOpen={isEditProfilePopupOpen}\n          onClose={closeAllPopups}\n          onUpdateUser={handleUpdateUser}\n          isLoading={isLoading}\n        />\n\n        {/* PopUp for AVATAR Editing */}\n        <EditAvatarPopup\n          isOpen={isEditAvatarPopupOpen}\n          onClose={closeAllPopups}\n          onUpdateAvatar={handleUpdateAvatar}\n          isLoading={isLoading}\n        />\n\n        {/* PopUp for CARD Adding */}\n        <AddPlacePopup\n          isOpen={isAddPlacePopupOpen}\n          onClose={closeAllPopups}\n          onAddPlace={handleAddPlaceSubmit}\n          isLoading={isLoading}\n        />\n\n        {/* PopUp for CARD Deleting */}\n        <DeletePlacePopup\n          isOpen={isDeletePlacePopupOpen}\n          onClose={closeAllPopups}\n          isLoading={isLoading}\n          onDeleteCard={handleCardDelete}\n          deletingCard={deletingCard}\n        />\n\n        <ImagePopup\n          isOpen={isPlacePopupOpen}\n          onClose={closeAllPopups}\n          name={selectedCard.name}\n          src={selectedCard.src}\n        />\n        <Footer />\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./components/App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n","module.exports = __webpack_public_path__ + \"static/media/logo.855a8c98.svg\";"],"sourceRoot":""}